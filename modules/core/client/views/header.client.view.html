<div ng-controller="HeaderController as vm" flex layout="column" layout-fill="">
  <md-toolbar layout="row" class="md-whiteframe-z2">
    <md-button ng-click="vm.toggleLeftMenu()" flex aria-label="Abrir o menu">
      <md-icon class="icone36" md-font-set="material-icons">menu</md-icon>
    </md-button>
    <div flex="20">
      <a ui-sref="home">MEAN.JS</a>
    </div>
    <div flex></div>
  </md-toolbar>
  <div class="navbar-header">
    <button class="navbar-toggle" type="button" ng-click="vm.isCollapsed = !vm.isCollapsed">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a ui-sref="home" class="navbar-brand">MEAN.JS</a>
  </div>
  <md-menu-bar role="navigation">
    <md-menu>
      <button ng-repeat="item in vm.menu.items | orderBy: 'position'"
                 ng-show="item.shouldRender(vm.authentication.user)"
                 ng-click="$mdOpenMenu()">{{::item.title}}
      </button>
      <md-menu-content>
        <md-menu-item ng-repeat="subitem in item.items | orderBy: 'position'">
          <md-button ng-show="subitem.shouldRender(vm.authentication.user)"
                     ui-sref="{{subitem.state}}({{subitem.params}})">
            {{subitem.title}}
          </md-button>
        </md-menu-item>
      </md-menu-content>
      </md-button>
    </md-menu>
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown" ng-class="dropdown" ng-switch="dropdown" ui-sref-active="active" uib-dropdown="true">
        <a uib-dropdown-toggle class="dropdown-toggle" role="button">Lang <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a ng-click="vm.changeLanguage('en_US')">English</a></li>
          <li><a ng-click="vm.changeLanguage('pt_BR')">PortuguÃªs</a></li>
        </ul>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right" ng-hide="vm.authentication.user">
      <li ui-sref-active="active">
        <a ui-sref="authentication.signup">Sign Up</a>
      </li>
      <li class="divider-vertical"></li>
      <li ui-sref-active="active">
        <a ui-sref="authentication.signin">Sign In</a>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right" ng-show="vm.authentication.user">
      <li class="dropdown" uib-dropdown>
        <a class="dropdown-toggle user-header-dropdown-toggle" uib-dropdown-toggle role="button">
          <img ng-src="/{{vm.authentication.user.profileImageURL}}" alt="{{vm.authentication.user.displayName}}" class="header-profile-image" />
          <span ng-bind="vm.authentication.user.displayName"></span> <b class="caret"></b>
        </a>
        <ul class="dropdown-menu" role="menu">
          <li ui-sref-active="active" ng-repeat="item in vm.accountMenu.items">
            <a ui-sref="{{item.state}}" ng-bind="item.title"></a>
          </li>
          <li class="divider"></li>
          <li>
            <a href="/api/auth/signout" target="_self">Signout</a>
          </li>
        </ul>
      </li>
    </ul>
  </md-menu-bar>
</div>
